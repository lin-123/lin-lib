"use strict";(self.webpackChunklin_lib=self.webpackChunklin_lib||[]).push([[297],{88387:function(P,e,n){n.r(e);var O=n(90228),s=n.n(O),A=n(87999),g=n.n(A),o=n(25298),M=n.n(o),d=n(17069),i=n.n(d),y=n(82092),v=n.n(y),T=n(24810),C=n(72630),R=function(){function u(){M()(this,u),v()(this,"dictData",{}),v()(this,"loadingStatus",{}),(0,T.makeAutoObservable)(this)}return i()(u,[{key:"initDictByCode",value:function(){var l=g()(s()().mark(function b(r){var _,h;return s()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(!this.loadingStatus[r]){c.next=2;break}return c.abrupt("return");case 2:return this.loadingStatus[r]="loading",c.next=5,D(r);case 5:_=c.sent,h=_.map(function(K){return{label:K.dictCode,value:K.dictValue}}),this.dictData[r]=h,this.loadingStatus[r]="ready";case 9:case"end":return c.stop()}},b,this)}));function m(b){return l.apply(this,arguments)}return m}()}]),u}();e.default=new R;function D(u){return(0,C.sleep)(300).then(function(){return[{dictCode:"".concat(u,"-1"),dictValue:1},{dictCode:"".concat(u,"-2"),dictValue:2},{dictCode:"".concat(u,"-3"),dictValue:3}]})}},95007:function(P,e,n){var O;n.r(e),n.d(e,{demos:function(){return U}});var s=n(48305),A=n.n(s),g=n(90228),o=n.n(g),M=n(87999),d=n.n(M),i=n(75271),y=n(4606),v=n(72630),T=n(51446),C=n(33217),R=n(82948),D=n(16483),u=n.n(D),l=n(82187),m=n.n(l),b=n(45199),r=n(23463),_=n(81697),h=n(55192),j=n(8511),c=n(57352),K=n(9349),L=n(88387),N=n(24810),F=n(36023),B=n(23816),W=n(2290),U={"src-ant-pro-demo-demo":{component:i.memo(i.lazy(function(){return Promise.all([n.e(428),n.e(379),n.e(521),n.e(623),n.e(365),n.e(433)]).then(n.bind(n,63953))})),asset:{type:"BLOCK",id:"src-ant-pro-demo-demo",refAtomIds:[],dependencies:{"index.jsx":{type:"FILE",value:n(46256).Z},"uc-fun":{type:"NPM",value:"1.2.0"},antd:{type:"NPM",value:"5.23.4"},react:{type:"NPM",value:"18.3.1"},"./DateTime.jsx":{type:"FILE",value:n(6978).Z},"..jsx":{type:"FILE",value:n(89052).Z},dayjs:{type:"NPM",value:"1.11.13"},classnames:{type:"NPM",value:"2.5.1"},"./SearchForm.jsx":{type:"FILE",value:n(69550).Z},"./index.module.less":{type:"FILE",value:n(35166).Z},"./PageTable.jsx":{type:"FILE",value:n(51637).Z},ahooks:{type:"NPM",value:"3.8.4"},"./SearchForm.module.less":{type:"FILE",value:n(5383).Z}},entry:"index.jsx"},context:{"./DateTime.jsx":C,"..jsx":R,"./SearchForm.jsx":b,"./index.module.less":r,"./PageTable.jsx":_,"./SearchForm.module.less":j,"uc-fun":v,antd:T,react:O||(O=n.t(i,2)),"/home/runner/work/lin-lib/lin-lib/src/AntPro/SearchTable/DateTime.jsx":C,"/home/runner/work/lin-lib/lin-lib/src/AntPro/SearchTable/index.jsx":R,dayjs:D,classnames:l,"/home/runner/work/lin-lib/lin-lib/src/AntPro/SearchTable/SearchForm.jsx":b,"/home/runner/work/lin-lib/lin-lib/src/AntPro/SearchTable/index.module.less":r,"/home/runner/work/lin-lib/lin-lib/src/AntPro/SearchTable/PageTable.jsx":_,ahooks:h,"/home/runner/work/lin-lib/lin-lib/src/AntPro/SearchTable/SearchForm.module.less":j},renderOpts:{compile:function(){var I=d()(o()().mark(function p(){var f,a=arguments;return o()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([n.e(379),n.e(675)]).then(n.bind(n,80675));case 2:return t.abrupt("return",(f=t.sent).default.apply(f,a));case 3:case"end":return t.stop()}},p)}));function E(){return I.apply(this,arguments)}return E}()}},"src-ant-pro-demo-dict":{component:i.memo(i.lazy(function(){return Promise.all([n.e(428),n.e(379),n.e(521),n.e(623),n.e(365),n.e(433)]).then(n.bind(n,29146))})),asset:{type:"BLOCK",id:"src-ant-pro-demo-dict",refAtomIds:[],dependencies:{"index.jsx":{type:"FILE",value:n(9105).Z},antd:{type:"NPM",value:"5.23.4"},"..jsx":{type:"FILE",value:n(31103).Z},"mobx-react-lite":{type:"NPM",value:"4.1.0"},ahooks:{type:"NPM",value:"3.8.4"},"./dictStore.js":{type:"FILE",value:n(98993).Z},mobx:{type:"NPM",value:"6.13.6"},"uc-fun":{type:"NPM",value:"1.2.0"}},entry:"index.jsx"},context:{"..jsx":c,"./dictStore.js":L,antd:T,"/home/runner/work/lin-lib/lin-lib/src/AntPro/Dict/index.jsx":c,"mobx-react-lite":K,ahooks:h,"/home/runner/work/lin-lib/lin-lib/src/AntPro/Dict/dictStore.js":L,mobx:N,"uc-fun":v},renderOpts:{compile:function(){var I=d()(o()().mark(function p(){var f,a=arguments;return o()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([n.e(379),n.e(675)]).then(n.bind(n,80675));case 2:return t.abrupt("return",(f=t.sent).default.apply(f,a));case 3:case"end":return t.stop()}},p)}));function E(){return I.apply(this,arguments)}return E}()}},"src-ant-pro-demo-0":{component:i.memo(i.lazy(d()(o()().mark(function I(){var E,p;return o()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Promise.resolve().then(n.bind(n,36023));case 2:return E=a.sent,p=E.default,a.abrupt("return",{default:function(){var t=function(){return new Promise(function(Z){setTimeout(function(){Z()},1e3)})};return i.createElement(p,{onClick:t},"\u64CD\u4F5C\u6309\u94AE")}});case 5:case"end":return a.stop()}},I)})))),asset:{type:"BLOCK",id:"src-ant-pro-demo-0",refAtomIds:[],dependencies:{"index.jsx":{type:"FILE",value:`import ActionButton from './ActionButton.jsx'

export default () => {
  const onClick = () => {
    return new Promise((resolve) => {
      setTimeout(() => {
        resolve();
      }, 1000)
    });
  }

  return <ActionButton onClick={onClick}>
    \u64CD\u4F5C\u6309\u94AE
  </ActionButton>;
}`},"./ActionButton.jsx":{type:"FILE",value:n(22881).Z}},entry:"index.jsx"},context:{"./ActionButton.jsx":F,"/home/runner/work/lin-lib/lin-lib/src/AntPro/ActionButton.jsx":F},renderOpts:{compile:function(){var I=d()(o()().mark(function p(){var f,a=arguments;return o()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([n.e(379),n.e(675)]).then(n.bind(n,80675));case 2:return t.abrupt("return",(f=t.sent).default.apply(f,a));case 3:case"end":return t.stop()}},p)}));function E(){return I.apply(this,arguments)}return E}()}},"src-ant-pro-demo-1":{component:i.memo(i.lazy(d()(o()().mark(function I(){var E,p;return o()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Promise.resolve().then(n.bind(n,23816));case 2:return E=a.sent,p=E.default,a.abrupt("return",{default:function(){return i.createElement(p,{width:100},"EllipsisEllipsisEllipsisEllipsisEllipsisEllipsisEllipsis")}});case 5:case"end":return a.stop()}},I)})))),asset:{type:"BLOCK",id:"src-ant-pro-demo-1",refAtomIds:[],dependencies:{"index.jsx":{type:"FILE",value:`import Ellipsis from './Ellipsis.jsx';

export default () => {
  return <Ellipsis width={100}>
    EllipsisEllipsisEllipsisEllipsisEllipsisEllipsisEllipsis
  </Ellipsis>
}`},"./Ellipsis.jsx":{type:"FILE",value:n(59015).Z}},entry:"index.jsx"},context:{"./Ellipsis.jsx":B,"/home/runner/work/lin-lib/lin-lib/src/AntPro/Ellipsis.jsx":B},renderOpts:{compile:function(){var I=d()(o()().mark(function p(){var f,a=arguments;return o()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([n.e(379),n.e(675)]).then(n.bind(n,80675));case 2:return t.abrupt("return",(f=t.sent).default.apply(f,a));case 3:case"end":return t.stop()}},p)}));function E(){return I.apply(this,arguments)}return E}()}},"src-ant-pro-demo-2":{component:i.memo(i.lazy(d()(o()().mark(function I(){var E,p,f,a;return o()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.resolve().then(n.bind(n,2290));case 2:return E=t.sent,p=E.default,t.next=6,Promise.resolve().then(n.t.bind(n,75271,19));case 6:return f=t.sent,a=f.useState,t.abrupt("return",{default:function(){var Z=a(2),$=A()(Z,2),z=$[0],V=$[1];return i.createElement(p,{min:2,max:9,unit:"\u6B21",value:z,onChange:V})}});case 9:case"end":return t.stop()}},I)})))),asset:{type:"BLOCK",id:"src-ant-pro-demo-2",refAtomIds:[],dependencies:{"index.jsx":{type:"FILE",value:`import NumberSelect from './NumberSelect.jsx';
import { useState } from 'react';

export default () => {
  const [value, onChange] = useState(2);

  return <NumberSelect min={2} max={9} unit="\u6B21" {...{ value, onChange }} />
}`},react:{type:"NPM",value:"18.3.1"},"./NumberSelect.jsx":{type:"FILE",value:n(53776).Z}},entry:"index.jsx"},context:{"./NumberSelect.jsx":W,react:O||(O=n.t(i,2)),"/home/runner/work/lin-lib/lin-lib/src/AntPro/NumberSelect.jsx":W},renderOpts:{compile:function(){var I=d()(o()().mark(function p(){var f,a=arguments;return o()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([n.e(379),n.e(675)]).then(n.bind(n,80675));case 2:return t.abrupt("return",(f=t.sent).default.apply(f,a));case 3:case"end":return t.stop()}},p)}));function E(){return I.apply(this,arguments)}return E}()}}}},36023:function(P,e,n){n.r(e),n.d(e,{default:function(){return l},textBtnProps:function(){return u}});var O=n(26068),s=n.n(O),A=n(90228),g=n.n(A),o=n(87999),M=n.n(o),d=n(48305),i=n.n(d),y=n(67825),v=n.n(y),T=n(69897),C=n(75271),R=n(52676),D=["onClick","text","children"],u={color:"default",variant:"link"};function l(m){var b=m.onClick,r=m.text,_=m.children,h=v()(m,D),j=(0,C.useState)(!1),c=i()(j,2),K=c[0],L=c[1];return r&&Object.assign(h,u),(0,R.jsx)(T.ZP,s()(s()({onClick:M()(g()().mark(function N(){return g()().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:if(L(!0),B.t0=b,!B.t0){B.next=5;break}return B.next=5,b();case 5:L(!1);case 6:case"end":return B.stop()}},N)})),loading:K},h),{},{children:_}))}},57352:function(P,e,n){n.r(e),n.d(e,{DictSelect:function(){return C},DictSpan:function(){return R}});var O=n(26068),s=n.n(O),A=n(67825),g=n.n(A),o=n(9349),M=n(72422),d=n(31273),i=n(88387),y=n(52676),v=["code"],T=function(u){var l=i.default.dictData[u];return(0,M.Z)(function(){l||i.default.initDictByCode(u)}),l||[]},C=(0,o.observer)(function(D){var u=D.code,l=g()(D,v),m=T(u);return(0,y.jsx)(d.default,s()({allowClear:!0,mode:"multiple",options:m||[],optionFilterProp:"label"},l))}),R=(0,o.observer)(function(D){var u=D.code,l=D.value,m=T(u),b=m.find(function(r){return"".concat(r.value)==="".concat(l)});return(0,y.jsx)("span",{children:(b==null?void 0:b.label)||l})})},23816:function(P,e,n){n.r(e),n.d(e,{default:function(){return A}});var O=n(42459),s=n(52676);function A(g){var o=g.width,M=g.children;return(0,s.jsx)(O.Z.Text,{style:{width:o},ellipsis:{tooltip:M},children:M})}},2290:function(P,e,n){n.r(e),n.d(e,{default:function(){return y}});var O=n(26068),s=n.n(O),A=n(67825),g=n.n(A),o=n(31273),M=n(75271),d=n(52676),i=["min","max","unit","value","onChange"];function y(v){var T=v.min,C=v.max,R=v.unit,D=v.value,u=v.onChange,l=g()(v,i),m=(0,M.useMemo)(function(){for(var r=[],_=T;_<=C;_++)r.push({label:"".concat(_).concat(R),value:"".concat(_)});return r},[T,C]),b={value:D?["".concat(D)]:[],onChange:function(_){var h=Number(_[_.length-1]);u&&u(h||null)}};return(0,d.jsx)(o.default,s()(s()({mode:"tags",style:{width:"100%"},options:m},b),l))}},33217:function(P,e,n){n.r(e),n.d(e,{DATE_TIME_TYPE:function(){return m},RangePickerDateStr:function(){return R},buildDateRangeConfig:function(){return b},timeRangeToTimestampRange:function(){return u},timestampRangeToStr:function(){return l}});var O=n(26068),s=n.n(O),A=n(67825),g=n.n(A),o=n(82767),M=n(16483),d=n.n(M),i=n(72630),y=n(52676),v=["value"],T=["onChange"],C=function(_){var h=_.value,j=g()(_,v),c=h&&h[0]?h.map(function(K){return d()(K)}):h;return(0,y.jsx)(o.default.RangePicker,s()(s()({},j),{},{value:c,style:{width:"100%"}}))},R=function(_){var h=_.onChange,j=g()(_,T);return(0,y.jsx)(C,s()(s()({},j),{},{onChange:function(K,L){h(L)}}))},D="YYYY-MM-DD HH:mm";function u(r){if(r&&r.length===2)return r.map(function(_){return _.valueOf()})}function l(r){return!(r!=null&&r.length)===2?"-":r.map(function(_){return(0,i.timeFormat)(_,D)}).join("~")}var m="date";function b(){return{type:m,formItemRender:function(){return(0,y.jsx)(o.default.RangePicker,{style:{width:"100%"},showTime:!0})},colRender:function(_){return(0,i.timeFormat)(_,D)}}}},81697:function(P,e,n){n.r(e),n.d(e,{getIndexColumn:function(){return u}});var O=n(26068),s=n.n(O),A=n(90228),g=n.n(A),o=n(87999),M=n.n(o),d=n(67825),i=n.n(d),y=n(14989),v=n(60950),T=n(95853),C=n(75271),R=n(52676),D=["onQueryList","rowkey","columns","showIndex","defaultPageSize"],u=function(b,r){return{title:"\u5E8F\u53F7",dataIndex:"index",width:80,render:function(h,j,c){return(b-1)*r+c+1}}},l=(0,C.forwardRef)(function(m,b){var r=m.onQueryList,_=m.rowkey,h=m.columns,j=m.showIndex,c=m.defaultPageSize,K=i()(m,D),L=(0,y.Z)(function(){var I=M()(g()().mark(function E(p){var f,a,S;return g()().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return f=p.current,a=p.pageSize,x.prev=1,x.next=4,r({page:f,pageSize:a});case 4:return S=x.sent,x.abrupt("return",S);case 8:x.prev=8,x.t0=x.catch(1),console.error("search table query list error",x.t0),v.ZP.error(x.t0.message||"\u8BF7\u6C42\u5931\u8D25");case 12:case"end":return x.stop()}},E,null,[[1,8]])}));return function(E){return I.apply(this,arguments)}}(),{manual:!0,defaultPageSize:c}),N=L.loading,F=L.data,B=L.run,W=L.pagination;(0,C.useImperativeHandle)(b,function(){return{search:function(){return B(s()(s()({},W),{},{current:1}))},pagination:W}});var U=j?[u(W.current,W.pageSize)].concat(h):h;return(0,C.useEffect)(function(){B(W)},[]),(0,R.jsx)(T.Z,s()({rowKey:_||"id",dataSource:F==null?void 0:F.list,loading:N,columns:U,size:"middle",pagination:W},K))});e.default=l},45199:function(P,e,n){n.r(e);var O=n(26068),s=n.n(O),A=n(67825),g=n.n(A),o=n(48305),M=n.n(o),d=n(80166),i=n(18399),y=n(12201),v=n(99576),T=n(69897),C=n(75271),R=n(8511),D=n(82187),u=n.n(D),l=n(52676),m=["render"];function b(r,_){var h=r.className,j=r.initialValues,c=r.formItems,K=r.actions,L=r.noReset,N=r.onSearch,F=r.tableRef,B=d.Z.useForm(),W=M()(B,1),U=W[0];(0,C.useImperativeHandle)(_,function(){return U});var I=(0,C.useState)(!1),E=M()(I,2),p=E[0],f=E[1],a=c.length>6,S=function(x){return x.map(function(Z,$){var z=Z.render,V=g()(Z,m);return(0,l.jsx)(i.Z,{xs:12,sm:12,lg:{span:8},xl:{span:6},children:(0,l.jsx)(d.Z.Item,s()(s()({},V),{},{children:z?z(U):(0,l.jsx)(y.Z,{})}))},"".concat(V.name,"-").concat($))})};return(0,l.jsx)(d.Z,{form:U,initialValues:j,layout:"inline",colon:!1,className:u()(R.default.form,h),children:(0,l.jsxs)(v.Z,{gutter:[16,16],className:R.default.row,children:[S(c.slice(0,6)),a&&!p&&S(c.slice(6)),(0,l.jsxs)(i.Z,{style:{display:"flex",gap:8},children:[K,c.length>0&&(0,l.jsxs)(l.Fragment,{children:[!L&&(0,l.jsx)(T.ZP,{onClick:function(){return U.resetFields()},children:"\u91CD\u7F6E"}),(0,l.jsx)(T.ZP,{type:"primary",onClick:function(){N?N&&N(U.getFieldsValue()):F.current&&F.current.search&&F.current.search(U.getFieldsValue())},children:"\u67E5\u8BE2"}),a&&(0,l.jsx)(T.ZP,{type:"link",onClick:function(){return f(!p)},children:p?"\u5C55\u5F00":"\u6298\u53E0"})]})]})]})})}e.default=(0,C.forwardRef)(b)},82948:function(P,e,n){n.r(e),n.d(e,{getIndexColumn:function(){return D}});var O=n(90228),s=n.n(O),A=n(87999),g=n.n(A),o=n(26068),M=n.n(o),d=n(75271),i=n(82187),y=n.n(i),v=n(23463),T=n(81697),C=n(45199),R=n(52676),D=function(m,b){return{title:"\u5E8F\u53F7",dataIndex:"index",width:80,render:function(_,h,j){return(m-1)*b+j+1}}};function u(l,m){var b=l.initialValues,r=l.formItems,_=r===void 0?[]:r,h=l.columns,j=l.actions,c=l.showIndex,K=c===void 0?!0:c,L=l.onQueryList,N=l.rowKey,F=N===void 0?"id":N,B=l.tableProps,W=(0,d.useRef)(),U=(0,d.useRef)();return(0,d.useImperativeHandle)(m,function(){return{form:W.current,search:U.current.search}}),(0,R.jsxs)("div",{className:y()("page-content",v.default.searchtable),children:[(0,R.jsx)(C.default,{className:v.default.search,initialValues:b,ref:W,formItems:_,actions:j,tableRef:U}),(0,R.jsx)(T.default,M()(M()({ref:U},M()({showIndex:K,columns:h,rowKey:F},B)),{},{onQueryList:function(){var I=g()(s()().mark(function E(p){var f,a,S;return s()().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return f=p.page,a=p.pageSize,S=W.current.getFieldsValue(),x.abrupt("return",L(M()({page:f,pageSize:a},S)));case 3:case"end":return x.stop()}},E)}));return function(E){return I.apply(this,arguments)}}()}))]})}e.default=(0,d.forwardRef)(u)},8511:function(P,e,n){n.r(e),e.default={form:"HUPlMWVtFK4An7Z9nToH",row:"zC4VEG_8C2YEyRi9FfpE"}},23463:function(P,e,n){n.r(e),e.default={searchtable:"SUai9PLTxikNkkLEONVF",search:"LUvm8TJBoOkBVPG9QNd7"}},30483:function(P,e,n){n.r(e),n.d(e,{texts:function(){return s}});var O=n(4606);const s=[{value:"DictSelect DictSpan",paraId:0,tocIndex:2}]},22881:function(P,e){e.Z=`import { Button } from 'antd';
import { useState } from 'react';

export const textBtnProps = {
  color: 'default',
  variant: 'link'
}
// \u64CD\u4F5C\u6309\u94AE\uFF0C\u52A0 loading \u6548\u679C
export default function ActionButton({ onClick, text, children, ...props }) {
  const [loading, setLoading] = useState(false);
  if (text) {
    Object.assign(props, textBtnProps);
  }
  return <Button
    onClick={async () => {
      setLoading(true);
      onClick && await onClick();
      setLoading(false)
    }}
    loading={loading}
    {...props}
  >
    {children}
  </Button>;
}
`},9105:function(P,e){e.Z=`import { Flex } from "antd";
import { DictSelect, DictSpan } from ".";

export default () => <Flex gap={16}>
  <DictSelect code="select" style={{ width: 120 }} />
  <DictSpan code="select" value="1" />
</Flex>;`},98993:function(P,e){e.Z=`import { makeAutoObservable } from 'mobx';
import { sleep } from 'uc-fun';

class DictStore {
  constructor() {
    makeAutoObservable(this);
  }
  // \u6570\u636E\u96C6\u5408
  dictData = {}
  loadingStatus = {}

  async initDictByCode(code) {
    if (this.loadingStatus[code]) return;

    this.loadingStatus[code] = 'loading';
    const res = await getDictByCode(code);
    const list = res.map(i => ({ label: i.dictCode, value: i.dictValue }));
    this.dictData[code] = list;
    this.loadingStatus[code] = 'ready';
  }
}

export default new DictStore();

function getDictByCode(code) {
  return sleep(300).then(() => [
    { dictCode: \`\${code}-1\`, dictValue: 1 },
    { dictCode: \`\${code}-2\`, dictValue: 2 },
    { dictCode: \`\${code}-3\`, dictValue: 3 },
  ])
}`},31103:function(P,e){e.Z=`/* eslint-disable */
import { observer } from 'mobx-react-lite';
import { useMount } from 'ahooks';
import { Select } from 'antd';
import dictStore from './dictStore';

const useDict = (code) => {
  const options = dictStore.dictData[code];
  useMount(() => {
    if (!options) dictStore.initDictByCode(code);
  });
  return options || [];
}

export const DictSelect = observer(({ code, ...props }) => {
  const options = useDict(code);

  return <Select
    allowClear
    mode="multiple"
    options={options || []}
    optionFilterProp='label'
    {...props}
  />
});

// \u5B57\u6BB5\u6587\u672C\uFF0C value to label
export const DictSpan = observer(({ code, value }) => {
  const options = useDict(code);
  const opt = options.find(i => \`\${i.value}\` === \`\${value}\`);
  return <span>{opt?.label || value}</span>
});
`},59015:function(P,e){e.Z=`import { Typography } from 'antd';

export default function Ellipsis({ width, children }) {
  return <Typography.Text
    style={{ width }}
    ellipsis={{ tooltip: children }}
  >
    {children}
  </Typography.Text>
}`},53776:function(P,e){e.Z=`import { Select } from 'antd';
import { useMemo } from 'react';

/**
 * \u6269\u5C55\u81EA Ant Design \u7684 Select \u7EC4\u4EF6\uFF0C\u7528\u4E8E\u521B\u5EFA\u4E00\u4E2A\u6570\u5B57\u9009\u62E9\u5668\u3002
 * \u6B64\u7EC4\u4EF6\u5141\u8BB8\u7528\u6237\u4ECE\u6307\u5B9A\u7684\u6570\u5B57\u8303\u56F4\u4E2D\u9009\u62E9\u4E00\u4E2A\u6570\u5B57\uFF0C\u5E76\u652F\u6301\u624B\u52A8\u8F93\u5165\u3002
 *
 * @param {number} min - \u6570\u5B57\u8303\u56F4\u7684\u6700\u5C0F\u503C\u3002
 * @param {number} max - \u6570\u5B57\u8303\u56F4\u7684\u6700\u5927\u503C\u3002
 * @param {string} unit - \u6570\u5B57\u7684\u5355\u4F4D\uFF0C\u4F8B\u5982 "kg"\u3001"m" \u7B49\u3002
 * @param {number} value - \u5F53\u524D\u9009\u4E2D\u7684\u503C\u3002
 * @param {function} onChange - \u5F53\u9009\u4E2D\u503C\u53D1\u751F\u53D8\u5316\u65F6\u8C03\u7528\u7684\u56DE\u8C03\u51FD\u6570\u3002
 * @param {Object} [props] - \u5176\u4ED6\u4F20\u9012\u7ED9 Ant Design Select \u7EC4\u4EF6\u7684\u5C5E\u6027\u3002
 */
export default function NumberSelect({ min, max, unit, value, onChange, ...props }) {
  // select mode=tags \u60C5\u51B5\u4E0B value option.value \u90FD\u9700\u8981\u662F\u5B57\u7B26\u4E32\uFF0C \u56E0\u4E3A\u7528\u6237\u53EF\u4EE5\u624B\u52A8\u8F93\u5165\uFF0C\u8F93\u5165\u7684\u503C\u5C31\u662F\u5B57\u7B26\u4E32
  const options = useMemo(() => {
    const res = [];
    for (let i = min; i <= max; i++) {
      res.push({ label: \`\${i}\${unit}\`, value: \`\${i}\` })
    }
    return res;
  }, [min, max]);

  // maxCount 1
  const extProps = {
    value: value ? [\`\${value}\`] : [],
    onChange: (val) => {
      const target = Number(val[val.length - 1]);
      onChange && onChange(target || null);
    }
  };

  return <Select
    mode="tags"
    style={{ width: '100%' }}
    options={options}
    {...extProps}
    {...props}
  />;
}`},6978:function(P,e){e.Z=`// \u65E5\u671F\u7C7B\u578B\u67E5\u8BE2\u6761\u4EF6
import { DatePicker } from 'antd';
import dayjs from 'dayjs';
import { timeFormat } from 'uc-fun';

const CommonPicker = ({ value, ...props }) => {
  const val = value && value[0] ? value.map(i => dayjs(i)) : value;
  return <DatePicker.RangePicker
    {...props}
    value={val}
    style={{ width: '100%' }}
  />;
}
export const RangePickerDateStr = ({ onChange, ...props }) => {
  return <CommonPicker
    {...props}
    onChange={(date, dateStr) => {
      onChange(dateStr);
    }}
  />;
}

const fmt = 'YYYY-MM-DD HH:mm';
// \u65E5\u671F\u8303\u56F4\u8F6C\u65F6\u95F4\u6233\u8303\u56F4
export function timeRangeToTimestampRange(range) {
  if (range && range.length === 2) {
    return range.map(i => i.valueOf());
  }
}

export function timestampRangeToStr(range) {
  if (!range?.length === 2) return '-';
  return range.map(i => timeFormat(i, fmt)).join('~');
}

export const DATE_TIME_TYPE = 'date';
export function buildDateRangeConfig() {
  return {
    // \u6570\u636E\u7C7B\u578B \u65E5\u671F
    type: DATE_TIME_TYPE,
    // formItemRender: () => <RangePickerTimestamp />,
    formItemRender: () => <DatePicker.RangePicker style={{ width: '100%' }} showTime />,
    colRender: (timestamp) => timeFormat(timestamp, fmt)
  };
}`},51637:function(P,e){e.Z=`import { usePagination } from 'ahooks';
import { Table, message } from 'antd';
import { forwardRef, useEffect, useImperativeHandle } from 'react';

export const getIndexColumn = (current, pageSize) => {
  return {
    title: '\u5E8F\u53F7',
    dataIndex: 'index',
    width: 80,
    render: (x, row, idx) => (current - 1) * pageSize + idx + 1
  };
}

// \u5206\u9875\u5217\u8868
const PageTable = forwardRef(({
  onQueryList, rowkey, columns, showIndex, defaultPageSize, ...props
}, ref) => {
  const { loading, data, run, pagination } = usePagination(async ({ current, pageSize }) => {
    try {
      const res = await onQueryList({
        page: current,
        pageSize
      });
      return res;
    } catch (e) {
      console.error('search table query list error', e);
      message.error(e.message || '\u8BF7\u6C42\u5931\u8D25');
    }
  }, {
    manual: true,
    defaultPageSize
  });

  useImperativeHandle(ref, () => ({
    search: () => run({ ...pagination, current: 1 }),
    pagination
  }));

  const cols = showIndex ? [
    getIndexColumn(pagination.current, pagination.pageSize)
  ].concat(columns) : columns;
  useEffect(() => {
    run(pagination);
  }, []);

  return <Table
    rowKey={rowkey || 'id'}
    dataSource={data?.list}
    loading={loading}
    columns={cols}
    size="middle"
    pagination={pagination}
    // bordered
    {...props}
  >
  </Table>;
});

export default PageTable;
`},69550:function(P,e){e.Z=`/* eslint-disable */
import { Form, Row, Input, Button, Col } from 'antd';
import { forwardRef, useImperativeHandle, useState } from 'react';
import styles from './SearchForm.module.less';
import classNames from 'classnames';

function SearchForm({
  className,
  initialValues, formItems, actions, noReset, onSearch,
  tableRef
}, ref) {
  const [form] = Form.useForm();

  useImperativeHandle(ref, () => form);

  const [collapse, setCollapse] = useState(false);
  const canCollapse = formItems.length > 6;
  const renderFormItem = (list) => list.map(({ render, ...props }, idx) => (
    <Col key={\`\${props.name}-\${idx}\`} xs={12} sm={12} lg={{ span: 8 }} xl={{ span: 6 }}>
      <Form.Item {...props}>
        {render ? render(form) : <Input />}
      </Form.Item>
    </Col>
  ));
  return <Form
    form={form}
    initialValues={initialValues}
    layout="inline"
    colon={false}
    className={classNames(styles.form, className)}
  >
    <Row gutter={[16, 16]} className={styles.row}>
      {renderFormItem(formItems.slice(0, 6))}
      {canCollapse && !collapse && renderFormItem(formItems.slice(6))}
      <Col
        style={{
          // marginLeft: 'auto',
          display: 'flex',
          gap: 8
        }}
      >
        {actions}
        {formItems.length > 0 && (<>
          {!noReset && <Button onClick={() => form.resetFields()}>\u91CD\u7F6E</Button>}
          <Button type="primary" onClick={() => {
            if(onSearch){
              onSearch && onSearch(form.getFieldsValue());
            }else{
              tableRef.current && tableRef.current.search && tableRef.current.search(form.getFieldsValue());
            }
          }}>\u67E5\u8BE2</Button>
          {canCollapse && <Button type="link" onClick={() => setCollapse(!collapse)}>
            {collapse ? '\u5C55\u5F00' : '\u6298\u53E0'}
          </Button>}
        </>)}
      </Col>
    </Row>
  </Form>;
}

export default forwardRef(SearchForm);
`},5383:function(P,e){e.Z=`.form {
  .row {
    width: 100%;
  }
  :global {
    .ant-form-item {
      border: 1px solid #D9D9D9;
      padding-left: 8px;
      border-radius: 4px;
      margin-inline-end: 0;
      background-color: white;
      .ant-form-item-label > label {
        flex-shrink: 0;
        color: #B5B5B5;
        &::after {
          content: '';
          margin-left: 8px;
          height: 14px;
          width: 1px;
          background-color: #D9D9D9;
        }
      }
      .ant-picker-outlined, .ant-input-outlined, .ant-select-selector {
        border-color: transparent;
      }
    }
    .ant-form-item-control {
      // min-width: 160px;
    }
  }
}`},46256:function(P,e){e.Z=`import { genList, randomNum, randomStr, sleep } from "uc-fun";
import SearchTable from ".";
import { RangePickerDateStr } from "./DateTime";
import { Button } from "antd";
import { useRef } from "react";

const onQueryList = async ({ page, pageSize, ...params }) => {
  console.log('query list: ', page, pageSize, params)
  await sleep(randomNum(1000));
  const list = genList(pageSize, (idx) => ({
    id: pageSize * page + idx,
    taskName: 'taskName' + randomStr(),
    createUser: 'createUser' + randomStr(),
    createTime: 'createTime' + randomStr(),
  }));
  return {
    total: 20,
    list
  };
}

export default () => {
  const searchTableRef = useRef();
  return <SearchTable
    ref={searchTableRef}
    showIndex
    onQueryList={onQueryList}
    formItems={[
      { label: '\u4EFB\u52A1\u540D\u79F0', name: 'taskName' },
      { label: '\u521B\u5EFA\u65F6\u95F4', name: 'createTime', render: () => <RangePickerDateStr showTime /> },
    ]}
    columns={[
      { title: '\u4EFB\u52A1\u540D\u79F0', dataIndex: 'taskName' },
      { title: '\u521B\u5EFA\u8005', dataIndex: 'createUser' },
      { title: '\u521B\u5EFA\u65F6\u95F4', dataIndex: 'createTime' },
      {
        title: '\u64CD\u4F5C',
        render: (_, records) => <Button type="link">
          \u7F16\u8F91
        </Button>
      },
    ]}
  />
}`},89052:function(P,e){e.Z=`// \u901A\u7528\u67E5\u8BE2
import React, { forwardRef, useImperativeHandle, useRef } from 'react';
import classNames from 'classnames';
import styles from './index.module.less';
import PageTable from './PageTable';
import SearchForm from './SearchForm';

export const getIndexColumn = (current, pageSize) => {
  return {
    title: '\u5E8F\u53F7',
    dataIndex: 'index',
    width: 80,
    render: (x, row, idx) => (current - 1) * pageSize + idx + 1
  };
}

function SearchTable({
  initialValues, formItems = [], columns, actions,
  showIndex = true, onQueryList, rowKey = 'id', tableProps
}, ref) {
  const formRef = useRef();
  const tableRef = useRef();

  useImperativeHandle(ref, () => ({
    form: formRef.current,
    search: tableRef.current.search
  }));

  return <div className={classNames('page-content', styles.searchtable)}>
    <SearchForm
      className={styles.search}
      initialValues={initialValues}
      ref={formRef}
      formItems={formItems}
      actions={actions}
      // onSearch \u4F20\u5165\u4F1A\u7531\u4E8Eref\u6EDE\u540E\u6027\uFF0C\u51FD\u6570\u4E0D\u5B58\u5728
      // onSearch={tableRef.current?.search}
      tableRef={tableRef}
    />
    <PageTable
      ref={tableRef}
      {...{ showIndex, columns, rowKey, ...tableProps }}
      onQueryList={async ({ page, pageSize }) => {
        const params = formRef.current.getFieldsValue();
        return onQueryList({ page, pageSize, ...params })
      }}
    />
  </div>
}

export default forwardRef(SearchTable);
`},35166:function(P,e){e.Z=`.searchtable {
  padding-bottom: 0;
  .search {
    margin-bottom: 24px;
  }
  :global {
    .ant-table-thead >tr {
      // border-bottom: 1px solid #f0f0f0;
      >th {
        // border: 1px solid #D9D9D9 !important;
        border-inline-end: 1px solid #f0f0f0;
        border-bottom: 1px solid #f0f0f0 !important;
      }
    }
  }
}
`}}]);
